{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus/Desktop/daddy-ai-main/src/lib/fileStore.ts"],"sourcesContent":["import { randomUUID } from \"crypto\";\n\nexport interface FileEntry {\n  buffer: Buffer;\n  filename: string;\n  mimeType: string;\n  uploadedAt: number;\n}\n\nconst store = new Map<string, FileEntry>();\n\nconst TTL_MS = 30 * 60 * 1000; // 30 minutes\n\nfunction cleanup() {\n  const now = Date.now();\n  for (const [id, entry] of store) {\n    if (now - entry.uploadedAt > TTL_MS) {\n      store.delete(id);\n    }\n  }\n}\n\nexport function saveFile(buffer: Buffer, filename: string, mimeType: string): string {\n  cleanup();\n  const id = randomUUID();\n  store.set(id, { buffer, filename, mimeType, uploadedAt: Date.now() });\n  console.log(`Saved file: ${id}, filename: ${filename}, store size: ${store.size}`);\n  return id;\n}\n\nexport function getFile(fileId: string): FileEntry | undefined {\n  cleanup();\n  const file = store.get(fileId);\n  console.log(`Getting file: ${fileId}, found: ${file ? 'yes' : 'no'}`);\n  if (file) {\n    console.log(`File details: ${file.filename}, ${file.mimeType}, ${file.buffer.length} bytes`);\n  }\n  return file;\n}\n\nexport function deleteFile(fileId: string): void {\n  store.delete(fileId);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASA,MAAM,QAAQ,IAAI;AAElB,MAAM,SAAS,KAAK,KAAK,MAAM,aAAa;AAE5C,SAAS;IACP,MAAM,MAAM,KAAK,GAAG;IACpB,KAAK,MAAM,CAAC,IAAI,MAAM,IAAI,MAAO;QAC/B,IAAI,MAAM,MAAM,UAAU,GAAG,QAAQ;YACnC,MAAM,MAAM,CAAC;QACf;IACF;AACF;AAEO,SAAS,SAAS,MAAc,EAAE,QAAgB,EAAE,QAAgB;IACzE;IACA,MAAM,KAAK,IAAA,mHAAU;IACrB,MAAM,GAAG,CAAC,IAAI;QAAE;QAAQ;QAAU;QAAU,YAAY,KAAK,GAAG;IAAG;IACnE,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,GAAG,YAAY,EAAE,SAAS,cAAc,EAAE,MAAM,IAAI,EAAE;IACjF,OAAO;AACT;AAEO,SAAS,QAAQ,MAAc;IACpC;IACA,MAAM,OAAO,MAAM,GAAG,CAAC;IACvB,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,OAAO,SAAS,EAAE,OAAO,QAAQ,MAAM;IACpE,IAAI,MAAM;QACR,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;IAC7F;IACA,OAAO;AACT;AAEO,SAAS,WAAW,MAAc;IACvC,MAAM,MAAM,CAAC;AACf","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus/Desktop/daddy-ai-main/src/app/api/upload/route.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { NextRequest, NextResponse } from \"next/server\";\nimport { saveFile } from \"@/lib/fileStore\";\n\nexport const runtime = \"nodejs\"; // ensures Node APIs like Buffer work\n\nexport async function POST(req: NextRequest) {\n  try {\n    const formData = await req.formData();\n    const file = formData.get(\"file\") as File | null;\n\n    console.log(\"Received file:\", file?.name, file?.type, file?.size);\n\n    if (!file) {\n      console.log(\"No file found in request\");\n      return NextResponse.json({ success: false, error: \"No file uploaded\" }, { status: 400 });\n    }\n\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n\n    console.log(\"Buffer length:\", buffer.length);\n\n    // Save in in-memory store\n    const fileId = saveFile(buffer, file.name, file.type);\n\n    console.log(\"Saved file with ID:\", fileId);\n\n    return NextResponse.json({\n      success: true,\n      fileId,\n      filename: file.name,\n      size: buffer.length,\n    });\n  } catch (err: any) {\n    console.error(\"Upload error:\", err);\n    return NextResponse.json(\n      { success: false, error: err.message || \"Upload failed\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;AACrD;AACA;;;AAEO,MAAM,UAAU,UAAU,qCAAqC;AAE/D,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,QAAQ;QACnC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,QAAQ,GAAG,CAAC,kBAAkB,MAAM,MAAM,MAAM,MAAM,MAAM;QAE5D,IAAI,CAAC,MAAM;YACT,QAAQ,GAAG,CAAC;YACZ,OAAO,kLAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAO,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxF;QAEA,MAAM,cAAc,MAAM,KAAK,WAAW;QAC1C,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,QAAQ,GAAG,CAAC,kBAAkB,OAAO,MAAM;QAE3C,0BAA0B;QAC1B,MAAM,SAAS,IAAA,uKAAQ,EAAC,QAAQ,KAAK,IAAI,EAAE,KAAK,IAAI;QAEpD,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,OAAO,kLAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,UAAU,KAAK,IAAI;YACnB,MAAM,OAAO,MAAM;QACrB;IACF,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,kLAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO,IAAI,OAAO,IAAI;QAAgB,GACxD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}